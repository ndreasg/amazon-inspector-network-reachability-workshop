



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="The workshop will demonstrate how you can validate their network configuration without needing to have a deep networking background by using Inspectors Network Reachability report. You will learn how this report can help them find misconfigurations in the architecture or behaviors they might not have expected. The demo will finish with using the Network Reachability report findings integrated with other Security Services to remediate these issues.">
      
      
        <link rel="canonical" href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/">
      
      
        <meta name="author" content="aws-security-workshops@amazon.com">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Finding and addressing Network Misconfigurations on AWS</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#overview" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" title="Finding and addressing Network Misconfigurations on AWS" class="md-header-nav__button md-logo">
          
            <img src="images/aws_smile_logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Finding and addressing Network Misconfigurations on AWS
            </span>
            <span class="md-header-nav__topic">
              
                Overview
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mikewest82/InspectorNetworkReachability
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="." title="Overview" class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" title="Finding and addressing Network Misconfigurations on AWS" class="md-nav__button md-logo">
      
        <img src="images/aws_smile_logo.png" width="48" height="48">
      
    </a>
    Finding and addressing Network Misconfigurations on AWS
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    mikewest82/InspectorNetworkReachability
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="." title="Overview" class="md-nav__link md-nav__link--active">
      Overview
    </a>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="01-environment-setup/" title="Module 1: Environment Build and Configuration" class="md-nav__link">
      Module 1: Environment Build and Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="02-running-inspector/" title="Module 2: Running the Inspector Report" class="md-nav__link">
      Module 2: Running the Inspector Report
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="03-evaluate-findings/" title="Module 3: Evaluating Findings" class="md-nav__link">
      Module 3: Evaluating Findings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="04-integration-and-remediation/" title="Module 4: Integration and Remediation" class="md-nav__link">
      Module 4: Integration and Remediation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="05-cleanup/" title="Module 5: Cleanup" class="md-nav__link">
      Module 5: Cleanup
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="presentation-notes/" title="Presentation Notes" class="md-nav__link">
      Presentation Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="contribute/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop/edit/master/docs/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="overview">Overview</h1>
<p>In this workshop you will learn how to use the Amazon Inspector Network Reachability report to validate your network configuration without needing a deep background in networking. You will use this report to find misconfigurations that may result in unintended behaviors and unexpected vulnerabilities. You will finish the workshop by remediating these vulnerabilities by integrating the findings of Amazon Inspector with other AWS services.</p>
<ul>
<li>
<p><em>Level</em>: Intermediate</p>
</li>
<li>
<p><em>Duration</em>: 1:30 - 2:00 hours</p>
</li>
<li>
<p><em><a href="https://www.nist.gov/cyberframework/online-learning/components-framework">CSF Functions</a></em>: Detect, Respond</p>
</li>
<li>
<p><em><a href="https://d0.awsstatic.com/whitepapers/AWS_CAF_Security_Perspective.pdf">CAF Components</a></em>: Detective, Responsive</p>
</li>
</ul>
<h1 id="prerequisites">Prerequisites</h1>
<ol>
<li>You will need an AWS account for this workshop and administrative credentials.</li>
<li>You should be familiar with AWS core services such as Amazon EC2, Amazon VPC, and AWS CloudFormation. You should also be comfortable using the AWS console.</li>
<li>The instructions are written with the understanding that the account is new or clean. We strongly recommend that you do not do these workshops in work or "production" accounts.</li>
<li>You will incur charges for the AWS resources used in this workshop.   The charges for some of the resources may be covered through the <a href="https://aws.amazon.com/free/">AWS Free Tier</a>.  The demo uses free tier choices wherever possible.</li>
<li>If you are using an existing account with resources already deployed in a region, be aware of the soft limit of five VPCs per region.</li>
<li>You must run this workshop in a region supported by Amazon Inspector (<a href="https://docs.aws.amazon.com/inspector/latest/userguide/inspector_supported_os_regions.html">https://docs.aws.amazon.com/inspector/latest/userguide/inspector_supported_os_regions.html</a>). We recommended using the <em>us-east-1</em> region.</li>
<li>You must have an [EC2 key pair] (<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair</a>) in the region you have selected.</li>
</ol>
<h1 id="workshop-scenario">Workshop Scenario</h1>
<p>Example Corp. has been in AWS for a few months and is moving its first few workloads into AWS. The first workload to move was an external website with a database back end. Example Corp.â€™s security team insisted administrative access to servers must be through a set of bastion hosts in a separate VPC. Recently, a developer has created a public proof of concept for a new highly available web service and connected it to the environment without going through all the proper change management. The various IT stakeholders have been working off the following untested assumptions:</p>
<p>Assumption 1.> Instances in private subnets are not accessible from the internet</p>
<p>Assumption 2.> Putting servers in different Availability zones provides both failover and better reliability</p>
<p>Assumption 3.> Nothing can route through the bastion VPC</p>
<p>Assumption 4.> Access to the servers is limited according to the principle of least privilege</p>
<p>Assumption 5.> The bastion hosts can access all environments</p>
<p>Example Corp's IT team found the new configuration not because of controls, but from the increase in their AWS bill. As a result, the security and operations teams want to validate the right security is applied to both the new and existing environments using the Inspector Network Reachability report.</p>
<h1 id="architecture">Architecture</h1>
<p>You will use AWS CloudFormation to build the environment</p>
<p>The CloudFormation template will build the following elements of the workshop in a single account and will not use any existing VPCs.</p>
<ul>
<li>Three VPCs - VPC 1, 2, and 3.  VPC 1 and VPC 2 are both peered to VPC 3.</li>
<li>VPC 1 (the Web Application VPC) spans two Availability Zones each of which contains one public subnet and two private subnets.  The VPC also includes Application Load Balancers, web servers, and database servers.</li>
<li>VPC 2 (the Proof of Concept VPC) spans two Availability Zones each of which contains one public subnet and one private subnet.  The VPC also includes two servers.</li>
<li>VPC 3 (the Bastion VPC) spans two Availability Zones each of which has one private subnet.  The VPC also contains two bastion servers that offer SSH and RDP access to the environment.</li>
</ul>
<p>This environment is shown below.</p>
<p><img alt="" src="images/readme-1-architecture.png" /></p>
<p>Here are the Route Tables and Security Groups for you to review as well.</p>
<p><img alt="" src="images/readme-2-routes.png" /></p>
<p><img alt="" src="images/readme-3-security-groups.png" /></p>
<p><img alt="" src="images/readme-4-security-groups-2.png" /></p>
<h1 id="presentation-deck">Presentation Deck</h1>
<p>Feel free to download the <a href="assets/demo-support-presentation.pdf">workshop presentation</a>. You may find this helpful when doing the workshop yourself or in support of a group learning activity.</p>
<p>This site will note where the presentation material may be most useful.</p>
<h1 id="region">Region</h1>
<p>Make sure you are in a region supported by Amazon Inspector (<a href="https://docs.aws.amazon.com/inspector/latest/userguide/inspector_supported_os_regions.html">https://docs.aws.amazon.com/inspector/latest/userguide/inspector_supported_os_regions.html</a>). We recommend using the <em>us-east-1</em> region.</p>
<h1 id="modules">Modules</h1>
<p>The workshop is broken up into the five modules below:</p>
<ol>
<li><a href="01-environment-setup/">Environment Build and Configuration</a></li>
<li><a href="02-running-inspector/">Running the Inspector Report</a></li>
<li><a href="03-evaluate-findings/">Evaluating Findings</a></li>
<li><a href="04-integration-and-remediation/">Integration and Remediation</a></li>
<li><a href="05-cleanup/">Cleanup</a></li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="01-environment-setup/" title="Module 1: Environment Build and Configuration" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Module 1: Environment Build and Configuration
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="assets/fonts/font-awesome.css">
    
      <a href="https://github.com/aws-samples/amazon-inspector-network-reachability-workshop" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>